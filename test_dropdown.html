<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dropdown</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header">
                        <h4>Test Dropdown Functionality</h4>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="test-date" class="form-label">Select Date:</label>
                            <input type="date" id="test-date" class="form-control">
                        </div>
                        
                        <div class="mb-3">
                            <label for="test-time" class="form-label">Select Time:</label>
                            <select id="test-time" class="form-control">
                                <option value="">Select a date first to see available time slots</option>
                            </select>
                        </div>
                        
                        <div id="debug-info" class="mt-3 p-3 bg-light border rounded">
                            <h6>Debug Information:</h6>
                            <div id="debug-output"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const dateInput = document.getElementById('test-date');
        const timeSelect = document.getElementById('test-time');
        const debugOutput = document.getElementById('debug-output');
        
        function log(message) {
            console.log(message);
            debugOutput.innerHTML += '<div>' + message + '</div>';
        }
        
        function loadTestSlots() {
            const selectedDate = dateInput.value;
            log('üîç loadTestSlots() called for date: ' + selectedDate);
            
            if (!selectedDate) {
                log('‚ùå No date selected');
                timeSelect.innerHTML = '<option value="">Select a date first to see available time slots</option>';
                return;
            }
            
            log('‚è≥ Loading test slots...');
            timeSelect.innerHTML = '<option value="">Loading...</option>';
            
            // Simulate API delay
            setTimeout(() => {
                log('üßπ Clearing dropdown...');
                while (timeSelect.firstChild) {
                    timeSelect.removeChild(timeSelect.firstChild);
                }
                
                // Add default option
                const defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.textContent = 'Select a time slot';
                timeSelect.appendChild(defaultOption);
                log('‚ûï Added default option');
                
                // Add test slots
                const testSlots = [
                    { time: '09:00', display: '9:00 AM' },
                    { time: '11:00', display: '11:00 AM' },
                    { time: '13:00', display: '1:00 PM' },
                    { time: '15:00', display: '3:00 PM' },
                    { time: '17:00', display: '5:00 PM' }
                ];
                
                testSlots.forEach(slot => {
                    const option = document.createElement('option');
                    option.value = slot.time;
                    option.textContent = slot.display;
                    timeSelect.appendChild(option);
                    log('‚ûï Added slot: ' + slot.time + ' - ' + slot.display);
                });
                
                timeSelect.value = '';
                log('‚úÖ Dropdown populated with ' + testSlots.length + ' slots');
                log('Current dropdown HTML: ' + timeSelect.innerHTML);
            }, 500);
        }
        
        log('üöÄ Setting up test event listeners...');
        dateInput.addEventListener('change', function(event) {
            log('üìÖ Date changed to: ' + event.target.value);
            loadTestSlots();
        });
        
        log('‚úÖ Test setup complete');
    });
    </script>
</body>
</html>